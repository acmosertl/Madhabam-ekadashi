<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üå∏ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‚Äî Madhabam v9A.5 (Inline Popup)</title>
<style>
:root{
  --bg:#fff4e6; --card:#f9f2ea; --red:#bf2b2b; --red-d:#a31f1f;
  --gold:#ffb74d; --gold2:#ffcc80; --ink:#251b37; --muted:#6b5e7a;
  --pill:#fde0cf; --ok:#2e7d32;
  --shadow:0 10px 28px rgba(0,0,0,.16);
  --radius:22px;
  --b:12px;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);font-family:"Noto Sans Bengali",system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Bengali",sans-serif;color:var(--ink)}
.wrap{max-width:720px;margin:16px auto;padding:8px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px}
.head{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.badge{background:var(--red);color:#fff;border-radius:18px;padding:6px 12px;font-weight:800}
.title{flex:1;text-align:center;font-size:24px;font-weight:900;color:#fff;background:var(--red);border-radius:18px;padding:10px 8px;text-shadow:0 1px 0 rgba(0,0,0,.25);margin-top:6px}
.panel{background:var(--red);color:#fff;border-radius:26px;padding:22px 18px}
.name{font-size:42px;line-height:1.05;font-weight:900;text-align:center;margin:8px 0 2px;
  text-shadow:0 0 20px rgba(255,221,77,.55),0 0 40px rgba(255,193,7,.35)}
.date{font-size:22px;font-weight:800;text-align:center;margin:8px 0}
.left{font-size:24px;font-weight:900;text-align:center;margin:10px 0 4px}
.paran{font-size:18px;text-align:center;margin:8px 0 2px}
.paran .ok{color:#C8E6C9;background:rgba(255,255,255,.12);padding:1px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.35)}
.loc{display:flex;justify-content:center;gap:8px;align-items:center;margin:10px 0 0;font-weight:800}
.pin{font-size:18px}
.note{color:rgba(255,255,255,.8);text-align:center;font-size:14px;margin-top:8px}

.btn{display:block;margin:14px auto 4px;border:0;background:linear-gradient(90deg,var(--gold),var(--gold2));
  color:#4a2800;font-weight:900;padding:12px 16px;border-radius:16px;box-shadow:0 8px 18px rgba(255,167,38,.35);cursor:pointer}
.btn:active{transform:translateY(1px)}
.tag{display:inline-block;background:#ffd54f;color:#7a4b00;border-radius:999px;padding:6px 10px;font-weight:900}

/* popup (inline, framed) */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(8px);
  display:none;align-items:center;justify-content:center;padding:18px;z-index:50}
.modal{width:min(88vmin,480px);aspect-ratio:1/1;background:#fff8ee;border-radius:22px;box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden}
.m-head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid #f0e0d2}
.m-title{font-size:22px;font-weight:900;color:#4b2563}
.m-close{width:34px;height:34px;border-radius:50%;display:grid;place-items:center;border:0;background:#ffebee;color:#b71c1c;font-size:20px;cursor:pointer}
.m-body{padding:10px 14px;overflow:auto}

/* table */
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px 8px;border-bottom:1px solid #f1e4d8}
.table th{background:#f1dcff;color:#4b2563;text-align:left;font-weight:900;position:sticky;top:0}
.nameCell{font-weight:900}
.paranCell{white-space:nowrap}
.small{font-size:13px;color:var(--muted)}

/* compact layout spacing */
.compact{padding:10px}
.panel{padding:16px}
.name{font-size:38px}
.date{font-size:20px}
.left{font-size:22px}

/* helper */
.hide{display:none !important}
.center{ text-align:center }
</style>
</head>
<body>
<div class="wrap">
  <div class="card compact">
    <div class="head">
      <span class="badge">üå∏ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</span>
      <div class="tag">IST ‚Ä¢ UTC+05:30</div>
    </div>

    <div class="panel" id="ekaPanel">
      <div class="name" id="ekaName">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</div>
      <div class="date" id="ekaDate">‚Äî</div>
      <div class="left" id="ekaLeft">‚Äî</div>
      <div class="paran" id="ekaParan">‚Äî</div>
      <div class="loc"><span class="pin">üìç</span> ‡¶≠‡¶æ‡¶∞‡¶§ ‚Ä¢ IST</div>
      <div class="note">‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶ó‡¶£‡¶®‡¶æ ‡¶≠‡¶æ‡¶∞‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º (IST) ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶æ‡¶∞‡ßÄ‡•§</div>

      <button class="btn" id="openList">üîî ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
    </div>
  </div>
</div>

<!-- Inline Popup -->
<div class="overlay" id="overlay">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="mtitle">
    <div class="m-head">
      <div class="m-title" id="mtitle">üå∏ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ (IST)</div>
      <button class="m-close" id="closeList" aria-label="Close">‚úñ</button>
    </div>
    <div class="m-body">
      <table class="table" id="listTbl">
        <thead>
          <tr><th>‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</th><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th><th>‡¶™‡¶æ‡¶∞‡¶£</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="small center" style="margin-top:10px">‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ IST-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï; ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ/‡¶™‡¶æ‡¶∞‡¶£ ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡ßü ‡¶∏‡ßé‡¶∏‡¶Ç‡¶∏‡¶≠‡¶æ/‡¶Æ‡¶®‡ßç‡¶¶‡¶ø‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </div>
  </div>
</div>

<script>
/* ====== Time helpers (IST) ====== */
const IST_OFFSET_MIN = 330; // +05:30
function nowIST(){ // Date object in IST (but stored as UTC with offset math)
  const now = new Date();
  // convert local->UTC minutes, then add IST offset to get IST "wall clock"
  const utc = now.getTime() + (now.getTimezoneOffset()*60000);
  return new Date(utc + IST_OFFSET_MIN*60000);
}
function pad(n){return n<10?'0'+n:n}
function fmtDateIST(d){ // -> DD-MM-YYYY (IST)
  const y=d.getUTCFullYear(), m=d.getUTCMonth()+1, dd=d.getUTCDate();
  return `${pad(dd)}-${pad(m)}-${y}`;
}
function diffDays(a,b){ // days between (a->b), floor towards positive
  const ms = b - a;
  return Math.ceil(ms/86400000);
}

/* ====== Data (IST, 2025‚Äì26 sample list; expand easily) ======
   name: Bengali Ekadashi name,
   date: "YYYY-MM-DD" (IST midnight as the day of fasting),
   paran: optional human text (e.g., "‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ß™‡ß¶‚Äì‡ßØ:‡ßß‡ß¶ AM")
*/
const events = [
  { name:"‡¶∞‡¶Æ‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ",  date:"2025-11-15", paran:"‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ß™‡ß¶‚Äì‡ßØ:‡ßß‡ß¶ AM" },
  { name:"‡¶â‡ßé‡¶™‡¶®‡ßç‡¶®‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2025-11-30", paran:"‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ß™‡ß¶‚Äì‡ßØ:‡ßß‡ß¶ AM" },
  { name:"‡¶Æ‡ßã‡¶ï‡ßç‡¶∑‡¶¶‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2025-12-14", paran:"‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ß©‡ß¶‚Äì‡ßÆ:‡ß´‡ß´ AM" },
  { name:"‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-01-10", paran:"‡¶™‡¶∞‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ß™‡ß´‚Äì‡ßØ:‡ßß‡ß´ AM" },
  { name:"‡¶™‡ßÅ‡¶§‡ßç‡¶∞‡¶¶‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-01-29" },
  { name:"‡¶∑‡¶ü‡¶§‡¶ø‡¶≤‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-02-09" },
  { name:"‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-02-25" },
  { name:"‡¶Ü‡¶Æ‡¶≤‡¶ï‡¶ø ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-03-11" },
  { name:"‡¶™‡¶æ‡¶™‡¶Æ‡ßã‡¶ö‡¶®‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-03-27" },
  { name:"‡¶ï‡¶Æ‡¶≤‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-04-10" },
  { name:"‡¶¨‡¶∞‡ßÅ‡¶•‡¶ø‡¶®‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-04-24" },
  { name:"‡¶Æ‡ßã‡¶π‡¶ø‡¶®‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-05-09" },
  { name:"‡¶Ü‡¶™‡¶∞‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-05-24" },
  { name:"‡¶™‡¶æ‡¶®‡ßç‡¶°‡¶¨ ‡¶®‡¶ø‡¶∞‡ßç‡¶ú‡¶≤‡¶æ", date:"2026-06-08" },
  { name:"‡¶Ø‡ßã‡¶ó‡¶ø‡¶®‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-06-23" },
  { name:"‡¶∂‡¶æ‡¶Ø‡¶º‡¶®‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-07-08" },
  { name:"‡¶ï‡¶æ‡¶Æ‡¶ø‡¶ï‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-07-23" },
  { name:"‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-08-07" },
  { name:"‡¶Ö‡¶®‡ßç‡¶®‡¶¶‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-08-22" },
  { name:"‡¶™‡¶∞‡¶∂‡ßÅ‡¶∞‡¶æ‡¶Æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-09-06" },
  { name:"‡¶á‡¶®‡ßç‡¶¶‡¶ø‡¶∞‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-09-20" },
  { name:"‡¶™‡¶æ‡¶∂‡¶æ‡¶ô‡ßç‡¶ï‡ßÅ‡¶∑‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-10-06" },
  { name:"‡¶∞‡¶Æ‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-10-21" },
  { name:"‡¶â‡ßé‡¶™‡¶®‡ßç‡¶®‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ", date:"2026-11-05" },
];

/* ====== Core logic ====== */
function getNextEkadashiIST(now=nowIST()){
  // Find first event with date >= today (IST)
  const todayStr = fmtDateIST(now).split('-').reverse().join('-'); // YYYY-MM-DD
  const todayISO = new Date(`${todayStr}T00:00:00+05:30`);
  // Map to objects with real Date in IST
  const mapped = events.map(ev=>{
    const d = new Date(`${ev.date}T00:00:00+05:30`);
    return {...ev, _d: d};
  }).sort((a,b)=>a._d-b._d);

  for(const ev of mapped){
    if(ev._d >= todayISO) return ev;
  }
  // if all past, loop to the first of next cycle
  return mapped[0];
}

function renderMain(){
  const now = nowIST();
  const ek = getNextEkadashiIST(now);

  const dateStr = fmtDateIST(ek._d);
  document.getElementById('ekaName').textContent = ek.name;
  document.getElementById('ekaDate').textContent = `${dateStr}`;
  const days = diffDays(new Date(`${fmtDateIST(now).split('-').reverse().join('-')}T00:00:00+05:30`), ek._d);
  document.getElementById('ekaLeft').textContent = `${days} ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø`;

  const paranEl = document.getElementById('ekaParan');
  if(ek.paran){
    paranEl.innerHTML = `‡¶™‡¶æ‡¶∞‡¶£: ${ek.paran} <span class="ok">‚úîÔ∏é</span>`;
  }else{
    paranEl.textContent = '‡¶™‡¶æ‡¶∞‡¶£: ‚Äî';
  }
}

function renderTable(){
  const tbody = document.querySelector('#listTbl tbody');
  tbody.innerHTML = '';
  events.forEach(ev=>{
    const tr = document.createElement('tr');
    const d = new Date(`${ev.date}T00:00:00+05:30`);
    const ds = fmtDateIST(d);
    tr.innerHTML = `
      <td class="nameCell">${ev.name}</td>
      <td>${ds}</td>
      <td class="paranCell">${ev.paran ? ev.paran+' <span style="color:#2e7d32">‚úîÔ∏é</span>' : '‚Äî'}</td>
    `;
    tbody.appendChild(tr);
  });
}

/* ====== Popup controls (inline) ====== */
const overlay = document.getElementById('overlay');
document.getElementById('openList').addEventListener('click',()=>{
  renderTable();
  overlay.style.display='flex';
});
document.getElementById('closeList').addEventListener('click',()=>overlay.style.display='none');
overlay.addEventListener('click',e=>{
  if(e.target === overlay){ overlay.style.display='none'; }
});

/* ====== Boot + Auto refresh ====== */
renderMain();
// UI tick: refresh countdown every 60s
setInterval(renderMain, 60000);
// Data tick: in case events array later replaced by fetch, keep API cadence same
setInterval(renderMain, 12*60*60*1000);
</script>
</body>
</html>
